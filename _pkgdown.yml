url: https://thomasgareau.github.io/qesR/

template:
  bootstrap: 5
  logo: man/figures/logo.png
  includes:
    before_body: |
      <script>
      (function () {
        function normalizePath(path) {
          if (!path || path === "/") return "index.html";
          var clean = path;
          while (clean.length > 1 && clean.charAt(clean.length - 1) === "/") {
            clean = clean.slice(0, -1);
          }
          var segments = clean.split("/").filter(Boolean);
          if (segments.length > 0 && segments[0] === "qesR") segments = segments.slice(1);
          if (segments.length === 0) return "index.html";
          return segments.join("/");
        }
        document.addEventListener("DOMContentLoaded", function () {
          var path = window.location.pathname || "/";
          var rel = normalizePath(path);
          var root = path.indexOf("/qesR/") === 0 ? "/qesR/" : "/";
          var isFrench = /^articles\/fr-/.test(rel);
          var map = {
            "index.html": "articles/fr-demarrage.html",
            "articles/get-started.html": "articles/fr-demarrage.html",
            "articles/merged-dataset.html": "articles/fr-donnees-fusionnees.html",
            "articles/study-citations.html": "articles/fr-citations-etudes.html",
            "articles/analysis-sovereignty.html": "articles/fr-analyse-souverainete.html",
            "articles/analysis-descriptive.html": "articles/fr-analyse-descriptive.html",
            "articles/analysis-vote-choice.html": "articles/fr-analyse-choix-vote.html",
            "articles/fr-demarrage.html": "articles/get-started.html",
            "articles/fr-donnees-fusionnees.html": "articles/merged-dataset.html",
            "articles/fr-citations-etudes.html": "articles/study-citations.html",
            "articles/fr-analyse-souverainete.html": "articles/analysis-sovereignty.html",
            "articles/fr-analyse-descriptive.html": "articles/analysis-descriptive.html",
            "articles/fr-analyse-choix-vote.html": "articles/analysis-vote-choice.html"
          };
          var target = map[rel] || (isFrench ? "articles/get-started.html" : "articles/fr-demarrage.html");
          var label = isFrench ? "EN" : "FR";
          var navbar = document.querySelector(".navbar .container") || document.querySelector(".navbar .container-fluid");
          if (!navbar) return;
          var holder = document.createElement("div");
          holder.className = "qesr-lang-switch-wrap";
          var btn = document.createElement("a");
          btn.className = "qesr-lang-switch";
          btn.href = root + target;
          btn.textContent = label;
          btn.setAttribute("aria-label", isFrench ? "Switch to English" : "Basculer en fran√ßais");
          holder.appendChild(btn);
          navbar.appendChild(holder);
        });
      })();
      </script>
  bslib:
    primary: "#12355b"
    secondary: "#b5651d"
    base_font:
      google: "Source Sans 3"
    heading_font:
      google: "Space Grotesk"

home:
  title: qesR
  description: Access and harmonize Quebec Election Study datasets in R.

navbar:
  structure:
    left: [get_started, reference, merged, citations, analysis_sovereignty, analysis_vote_choice, news]
    right: [github]
  components:
    get_started:
      text: Get started
      href: articles/get-started.html
    reference:
      text: Reference
      href: reference/index.html
    news:
      text: Changelog
      href: news/index.html
    merged:
      text: Merged Dataset
      href: articles/merged-dataset.html
    citations:
      text: Study Citations
      href: articles/study-citations.html
    analysis_sovereignty:
      text: "Use case example: Sovereignty"
      href: articles/analysis-sovereignty.html
    analysis_vote_choice:
      text: "Use case example: Vote Choice"
      href: articles/analysis-vote-choice.html
    github:
      icon: fa-github
      href: https://github.com/ThomasGareau/qesR
      aria-label: GitHub repository

reference:
- title: Package
  contents:
  - qesR-package
- title: Download Studies
  contents:
  - get_qescodes
  - get_qes
  - get_preview
- title: Codebook Tools
  contents:
  - get_codebook
  - get_qes_codebook
  - qes_codebook
  - format_codebook
  - get_value_labels
  - get_question
  - get_codebook_files
  - get_qes_codebook_files
  - download_codebook
- title: Harmonized Data
  contents:
  - get_decon
  - get_qes_master

articles:
- title: Tutorials
  navbar: Tutorials
  contents:
  - get-started
  - merged-dataset
  - study-citations
  - analysis-sovereignty
  - analysis-descriptive
  - analysis-vote-choice
  - fr-demarrage
  - fr-donnees-fusionnees
  - fr-citations-etudes
  - fr-analyse-souverainete
  - fr-analyse-descriptive
  - fr-analyse-choix-vote
